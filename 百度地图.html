<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="http://api.map.baidu.com/api?v=1.4"></script>

		<style type="text/css">
			.box{
				width:500px;
				height:300px;
				border: 1px solid #000;
				font-size: 30px;
			}
		</style>
	</head>
	<body>
		<input type="button" name="btn" id="btn" value="获取" />
		<div class="box" id="box"></div>
		<script type="text/javascript">
			var btn = document.getElementById('btn');
			var box = document.getElementsByTagName('div')[0];
			
			btn.onclick = function(){
				
				navigator.geolocation.getCurrentPosition(function(position){
					var y = position.coords.longitude;
					var x = position.coords.latitude;
					
					// 百度地图API功能
					var map = new BMap.Map("box");    // 创建Map实例
					map.centerAndZoom(new BMap.Point(y, x), 99);  // 初始化地图,设置中心点坐标和地图级别
					map.addControl(new BMap.MapTypeControl());   //添加地图类型控件
					map.setCurrentCity("广州");          // 设置地图显示的城市 此项是必须设置的
					map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放
									
					
				
					
					//创建小狐狸
					var pt = new BMap.Point(y, x);
					var myIcon = new BMap.Icon("img/18.png", new BMap.Size(300,157));
					var marker2 = new BMap.Marker(pt,{icon:myIcon});  // 创建标注
					map.addOverlay(marker2);   
									
					marker2.enableDragging();      
					
					

				})
				
			}
			
		</script>
	</body>
</html>
